# Dedalus Perl SDK implementation checklist

> Reminder: make a git commit immediately after checking any item below.
> Update this checklist whenever work starts or completes so status never lags reality.

- [x] Audit Python template and capture requirements
  - [x] Review `README.md`, `api.md`, `pyproject.toml`, and `src/dedalus_labs`
  - [x] Enumerate public APIs and shared models
  - [x] Note cross-cutting helpers (retries, multipart, query serialization)
- [x] Bootstrap Perl distribution skeleton
  - [x] Set up CPAN-style layout (`lib/`, `t/`, `script/`, etc.)
  - [x] Choose build/dependency tooling and capture metadata
  - [x] Port docs into Perl-centric `README.md` and stub `api.md`
- [x] Implement configuration, auth, and environment handling
  - [x] Add `Dedalus::Config` with env + version info
  - [x] Create `Dedalus::Exception` hierarchy
- [x] Build HTTP client abstraction
  - [x] Implement sync HTTP layer with retries, serialization, multipart
  - [x] Create `Dedalus::Client` wrapper exposing resources
- [ ] Define data models and serialization utilities (do these before building new resources)
  - [ ] Port shared request/response types under `lib/Dedalus/Types/*` (chat, audio, image, assistants, files, vector stores, etc.)
  - [x] Add model coercion, validation, and file helpers (mirroring `_models.py`)
  - [x] Port querystring serializer (mirroring `_qs.py`)
  - [x] Add streaming chunk types (chat/response SSE payloads) per `docs/api/schemas.md`
  - [x] Model structured outputs (`responses` blocks, tool calls, image/audio payloads)
  - [x] Parse chat message audio + annotations and response image/audio output blocks
  - [x] Add response format helper types (text/json_object/json_schema)
  - [x] Add shared settings + Dedalus model helper types
  - [x] Add parsed chat completion helper types
  - [x] Add chat model ID + models param helper types
  - [x] Add tool call payload types for chat completions/streaming
  - [x] Add Pythonâ†”Perl parity report script for types/resources
  - [x] Add parity matrix doc for resource/type coverage
  - [x] Ensure generated types stay in sync with Python regeneration tooling
- [x] Implement resource modules (API surface)
  - [x] Implement `health` resource and integration example
  - [x] Implement `models` resource (list & retrieve)
  - [x] Implement `embeddings` resource
  - [x] Implement `audio.transcriptions` resource
  - [x] Implement `images` resource (generate/edit/variation)
  - [x] Implement `audio.translations` + `audio.speech` resources
  - [x] Mirror Python resource namespaces (chat, audio, files, etc.)
  - [x] Support nested sub-resources and consistent signatures
  - [x] Implement `responses` resource (create & retrieve)
  - [x] Add `responses` streaming helpers + structured-output utilities (per docs)
  - [x] Implement remaining resources from dedalus-sdk-python (none present in current Python template)
  - [x] Keep async modules in parity with sync resources
- [x] Add streaming and async support
  - [x] Implement SSE streaming helpers
  - [x] Finalize runner streams on `[DONE]` events
  - [x] Provide `Dedalus::Async` built on async primitives
- [x] Handle file uploads and multipart logic
  - [x] Mirror `_files.py` behavior: automatic filenames/content-types, streaming handles, metadata passthrough
  - [x] Expose ergonomic helpers for file uploads in user-facing APIs
  - [x] Port `_files.py` behaviors for IO handles, metadata
- [ ] Build testing strategy
  - [ ] Port behavior-driven tests using Perl testing frameworks
  - [x] Stub HTTP interactions and add smoke/golden tests
  - [x] Add multipart upload regression test
  - [x] Add querystring serialization regression tests (error cases)
  - [x] Add file extraction regression tests (including edge cases)
  - [x] Add deepcopy regression tests
  - [x] Add SSE parser regression tests (streaming edge cases)
  - [x] Add HTTP query build regression tests
  - [x] Add require_params regression tests
  - [x] Add file upload regression tests
  - [x] Add MIME type regression tests
  - [ ] Mirror Python regression coverage (chat/audio/images/files/batches/etc.)
  - [x] Add async/sync parity tests and streaming fixtures
  - [x] Add structured-output fixtures (responses/tool calling) and SSE chunk tests
- [ ] Configure tooling, CI, and release automation
  - [x] Add lint/format tooling and CI workflows
  - [ ] Mirror Python release tooling (version bump automation, package publish scripts)
  - [x] Document release process (Changes, tagging, CPAN upload)
